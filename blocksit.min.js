!function(t){var e,n,r={numOfCol:5,offsetX:5,offsetY:5,blockElement:"div"},f=[];Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length>>>0,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=e);e>n;n++)if(n in this&&this[n]===t)return n;return-1});var o=function(){f=[];for(var t=0;t<r.numOfCol;t++)i("empty-"+t,t,0,1,-r.offsetY)},i=function(t,e,n,o,i){for(var a=0;o>a;a++){var u=new Object;u.x=e+a,u.size=o,u.endY=n+i+2*r.offsetY,f.push(u)}},a=function(t,e){for(var n=0;e>n;n++){var r=u(t+n,"x");f.splice(r,1)}},u=function(t,e){for(var n=0;n<f.length;n++){var r=f[n];if("x"==e&&r.x==t)return n;if("endY"==e&&r.endY==t)return n}},h=function(t,e){for(var n=[],r=0;e>r;r++)n.push(f[u(t+r,"x")].endY);var o=Math.min.apply(Math,n),i=Math.max.apply(Math,n);return[o,i,n.indexOf(o)]},s=function(t){if(t>1){for(var e,n,r=f.length-t,o=!1,i=0;i<f.length;i++){var a=f[i],u=a.x;if(u>=0&&r>=u){var s=h(u,t);o?s[1]<e[1]&&(e=s,n=u):(o=!0,e=s,n=u)}}return[n,e[1]]}return e=h(0,f.length),[e[2],e[0]]},l=function(t){var e=0;e=!t.data("size")||t.data("size")<0?1:t.data("size")>r.numOfCol?r.numOfCol:t.data("size");var f=s(e),o=n*e-(t.outerWidth()-t.width());t.css({width:o-2*r.offsetX,left:f[0]*n,top:f[1],position:"absolute"});var u=t.outerHeight();a(f[0],e),i(t.attr("id"),f[0],f[1],e,u)};t.fn.BlocksIt=function(i){i&&"object"==typeof i&&t.extend(r,i),e=t(this),n=e.width()/r.numOfCol,o(),e.children(r.blockElement).each(function(e){l(t(this),e)});var a=h(0,f.length);return e.height(a[1]+r.offsetY),this}}(jQuery);